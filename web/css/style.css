:root {
	--vh-unit: 1vh;
	--vw-unit: 1vw;
	--max-play-width: calc(var(--vw-unit) * 90);
	--max-play-height: calc(var(--vh-unit) * 75);
	--play-width: min(var(--max-play-width),var(--max-play-height) * 0.75);
	--play-height: min(var(--max-play-height),var(--play-width) * 1.33);
	--horz-unit: calc(var(--play-width) / 100);
	--vert-unit: calc(var(--play-height) / 100);

	--color-transparent: rgba(0,0,0,0);
	--color-black: #000;
	--color-light-gray: #e3e3e3;
	--color-medium-gray: #ccc;
	--color-darker-gray: #999;
	--color-darkest-gray: #384047;
	--color-white: #fff;
	--color-green: #538d4e;
	--color-orange: #b59f3b;
	--color-light-red: #e8caca;

	--color-button-highlight: #fff12b;
	--color-ok-score: var(--color-orange);
	--color-good-score: var(--color-green);
	--color-played-letter-background: var(--color-green);
	--color-played-letter-text: var(--color-white);
	--color-edit-letter-background: var(--color-orange);
	--color-edit-letter-text: var(--color-white);
}

html {
	box-sizing: border-box;
	height: 100%;
}

*,
*::before,
*::after {
	box-sizing: inherit;
	-webkit-user-select: none;
	user-select: none;
}

body {
	position: relative;
	display: grid;
	grid-template-areas:
		"header"
		"play-area"
		"keyboard"
	;
	grid-template-rows: min-content auto min-content;

	margin: 0px;
	padding: 0px;
	font-family: "Segoe UI", sans-serif;
	height: 100%;
	overflow: hidden;

	overscroll-behavior-x: contain;
}

button:disabled,
input[type=radio]:disabled + label {
	cursor: not-allowed !important;
}

header {
	--header-text-size: calc(var(--play-width) / 12);
	--header-text-spacing: calc(var(--header-text-size) / 3);
	--menu-button-size: calc(var(--header-text-size) * 1.3);
	--help-button-size: calc(var(--header-text-size) * 1.3);

	position: relative;
	grid-area: header;
	text-align: center;
	width: 100%;
	height: min-content;
	cursor: default;
	border-bottom: thin solid var(--color-medium-gray);
}

header > #menu-toggle-btn {
	position: absolute;
	left: var(--header-text-spacing);
	top: 50%;
	transform: translateY(-50%);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 15%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
header > #menu-toggle-btn::after {
	content: "";
	display: block;
	width: var(--menu-button-size);
	height: var(--menu-button-size);
	border-radius: 15%;
	background-image: url(../images/icon-menu.svg);
	background-position: 0;
	background-size: var(--menu-button-size);
	background-repeat: no-repeat;
}
header > #menu-toggle-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}

header > #help-btn {
	position: absolute;
	left: calc((var(--header-text-spacing) * 1.5) + var(--menu-button-size));
	top: 50%;
	transform: translateY(-50%);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 50%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
header > #help-btn::after {
	content: "";
	display: block;
	width: var(--help-button-size);
	height: var(--help-button-size);
	border-radius: 50%;
	background-image: url(../images/icon-help.svg);
	background-position: 50% 50%;
	background-size: calc(var(--help-button-size) * 0.6);
	background-repeat: no-repeat;
}
header > #help-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}

header > #title {
	display: inline-block;
	font-size: var(--header-text-size);
	font-weight: bold;
	color: var(--color-darkest-gray);
	padding-top: var(--header-text-spacing);
	padding-bottom: var(--header-text-spacing);
}

header > #game-score {
	position: absolute;
	right: calc(var(--header-text-size) / 2);
	top: 50%;
	transform: translateY(-50%);
	font-weight: bold;
	font-size: var(--header-text-size);
	color: var(--color-ok-score);
}

header > #game-score.good {
	color: var(--color-good-score);
}

header > #score.hidden {
	display: none;
}

menu#main-menu {
	--menu-text-size: calc(var(--play-width) / 16);

	position: fixed;
	left: 0;
	top: 0;
	display: block;
	width: min-content;
	min-height: 50%;
	z-index: 1000;
	list-style-type: none;
	margin: 0;
	padding: var(--menu-text-size);
	padding-top: calc(var(--menu-text-size) * 2);
	border-bottom-right-radius: calc(var(--horz-unit) * 2);
	background-color: var(--color-light-gray);
	box-shadow: 4px 4px 8px 1px rgba(0,0,0,0.34);
}

menu#main-menu.hidden {
	display: none;
}

menu#main-menu > #close-menu-btn {
	--button-size: calc(var(--menu-text-size) * 1.8);

	position: absolute;
	top: 0;
	right: 0;
	width: var(--button-size);
	height: var(--button-size);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 50%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
menu#main-menu > #close-menu-btn::after {
	content: "";
	display: block;
	width: var(--button-size);
	height: var(--button-size);
	border-radius: 50%;
	background-image: url(../images/icon-close.svg);
	background-position: 50% 50%;
	background-size: calc(var(--button-size) * 0.6);
	background-repeat: no-repeat;
}
menu#main-menu > #close-menu-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}

menu#main-menu > li {
	margin: 0;
	padding: 0;
	white-space: nowrap;
	font-weight: bold;
	font-size: var(--menu-text-size);
}

menu#main-menu > li:nth-of-type(2) {
	margin-top: calc(var(--menu-text-size) * 0.75);
}

menu#main-menu > li button#new-game-btn {
	--icon-size: calc(var(--menu-text-size) * 0.9);

	position: relative;
	font-weight: bold;
	font-size: var(--menu-text-size);
	background-color: var(--color-white);
	outline: none;
	color: var(--color-black);
	border: thin solid var(--color-darker-gray);
	border-radius: calc(var(--horz-unit) * 2);
	padding:
		calc(var(--vert-unit) * 1.1) calc(var(--horz-unit) * 3.5)
		calc(var(--vert-unit) * 1.1) calc(var(--icon-size) * 2);
}
menu#main-menu > li button#new-game-btn:after {
	content: "";
	display: block;
	position: absolute;
	width: var(--icon-size);
	height: var(--icon-size);
	left: calc(var(--icon-size) / 2);
	top: 50%;
	transform: translateY(-50%);
	background-image: url(../images/icon-play-new-game.svg);
	background-position: 0;
	background-size: var(--icon-size);
	background-repeat: no-repeat;
}
menu#main-menu > li button#new-game-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}

menu#main-menu > li input[type=radio] {
	width: calc(var(--horz-unit) * 4);
	height: calc(var(--horz-unit) * 4);
}

#play-area {
	--max-letter-count: 4;

	/* N = play-width */
	/* M = max-letter-count */
	/* x = (N - (M-1)x / 3 - 2x - 0.25x) / M */
	/* x = 3N / (4M + 5.75) */
	--letter-size: calc(
		(var(--play-width) * 3) / ((var(--max-letter-count) * 4) + 5.75)
	);
	--letter-spacing: calc(var(--letter-size) / 3);
	--word-size: calc(
		(var(--letter-size) * var(--max-letter-count)) +
		(var(--letter-spacing) * (var(--max-letter-count) - 1))
	);

	--play-action-gutter-size: calc(var(--letter-size) * 2);
	--play-action-btn-size: calc(var(--play-action-gutter-size) * 0.4);
	--play-action-btn-spacing: calc(var(--play-action-gutter-size) * 0.1);

	--letter-insert-btn-size: calc(var(--letter-spacing) * 2.9);
	--letter-remove-btn-size: calc(var(--letter-spacing) * 2.8);

	--bottom-spacing: calc(var(--vert-unit) * 8);

	grid-area: play-area;
	align-self: end;
	position: relative;
	min-height: calc(var(--letter-size) * 2);
	max-height: 100%;
	overflow-x: hidden;
	overflow-y: auto;
	overflow-y: overlay;
}

#play-area.hidden {
	display: none;
}

#played-words, #next-play > form {
	position: relative;
	display: grid;
	grid-template-columns: var(--word-size) var(--play-action-gutter-size);
	grid-template-rows: min-content;
	gap: var(--letter-spacing) calc(var(--letter-spacing) / 2);
	width: var(--play-width);
}

#played-words {
	margin: calc(var(--letter-spacing) / 2) auto 0 auto;
	padding-bottom: calc(var(--letter-spacing) / 2);
	border-bottom: thin solid var(--color-darker-gray);
}

#played-words > div:nth-child(2) {
	position: relative;
	height: 100%;
}

#undo-btn, #undo-all-btn {
	--button-size: var(--letter-size);

	position: absolute;
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
#undo-btn {
	right: 0;
	bottom: calc(var(--letter-spacing) + var(--letter-size));
}
#undo-all-btn {
	right: 0;
	top: calc(var(--letter-spacing) / 2);
}
#undo-btn::after, #undo-all-btn::after {
	content: "";
	display: block;
	width: var(--button-size);
	height: var(--button-size);
	background-position: 50% 50%;
	background-size: calc(var(--button-size) * 0.8);
	background-repeat: no-repeat;
}
#undo-btn::after {
	background-image: url(../images/icon-undo.svg);
}
#undo-all-btn::after {
	background-image: url(../images/icon-undo-all.svg);
}
#undo-btn:focus, #undo-all-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}
#undo-btn:disabled, #undo-all-btn:disabled {
	display: none;
}



header > #menu-toggle-btn {
	position: absolute;
	left: var(--header-text-spacing);
	top: 50%;
	transform: translateY(-50%);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 15%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
header > #menu-toggle-btn::after {
	content: "";
	display: block;
	width: var(--menu-button-size);
	height: var(--menu-button-size);
	border-radius: 15%;
	background-image: url(../images/icon-menu.svg);
	background-position: 0;
	background-size: var(--menu-button-size);
	background-repeat: no-repeat;
}
header > #menu-toggle-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}




#played-words-list {
	list-style-type: none;
	margin: 0;
	padding: 0;
	width: 100%;
	height: 100%;
}

#played-words-list > li {
	margin: calc(var(--letter-spacing) / 2) 0;
	padding: 0;
}

#played-words-list > li:last-child {
	margin-bottom: 0;
}

#played-words.complete {
	margin-bottom: var(--bottom-spacing);
	padding-bottom: 0;
	border-bottom: thin solid var(--color-transparent);
}

#played-words > #played-words-list > li.word > .letter > span {
	background-color: var(--color-played-letter-background);
	color: white;
	border-color: var(--color-played-letter-background);
}

#played-words.complete > #played-words-list > li.word:last-child {
	padding-bottom: calc(var(--letter-spacing) / 2);
	border-top: thin solid var(--color-transparent);
	border-bottom: thin solid var(--color-transparent);
}

#next-play {
	width: var(--play-width);
	padding-top: calc(var(--letter-spacing) / 2);
	margin: 0 auto var(--bottom-spacing) auto;
}

#next-play.hidden {
	display: none;
}

.word {
	grid-column-start: 1;

	position: relative;
	display: inline-flex;
	justify-content: flex-start;
	width: var(--word-size);
	height: var(--letter-size);
}

.word > .letter {
	position: relative;
	width: var(--letter-size);
	height: var(--letter-size);
	margin-right: var(--letter-spacing);
}

.word > .letter:last-child {
	margin: 0;
}

.word > .letter > input[type=radio] {
	position: absolute;
	visibility: hidden;
	font-size: 0.001px;
	width: 0.001px;
	height: 0.001px;
	opacity: 0;
	left: -2000px;
}

.word > .letter > input[type=radio] + label {
	cursor: pointer;
}

.word > .letter > input[type=radio] + label,
.word > .letter > span {
	display: block;
	width: var(--letter-size);
	height: var(--letter-size);
	padding: 0;
	line-height: calc(var(--letter-size) * 0.9);
	font-size: calc(var(--letter-size) * 0.75);
	font-weight: bold;
	text-align: center;
	color: var(--color-darkest-gray);
	border: thin solid var(--color-darkest-gray);
	border-radius: calc(var(--horz-unit) * 0.75);
}

.word > .letter > input[type=radio]:checked + label {
	color: var(--color-edit-letter-text);
	border-color: var(--color-edit-letter-background);
	background-color: var(--color-edit-letter-background);
}

.word > .letter > .remove-letter-btn {
	display: none;
	position: absolute;
	z-index: 20;
	bottom: 0;
	right: 0;
	transform: translate(50%,65%);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 50%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
.word > .letter > .remove-letter-btn::after {
	content: "";
	display: block;
	width: var(--letter-remove-btn-size);
	height: var(--letter-remove-btn-size);
	border-radius: 50%;
	background-image: url(../images/icon-remove-letter.svg);
	background-position: 50% 50%;
	background-size: calc(var(--letter-remove-btn-size) * 0.8);
	background-repeat: no-repeat;
}
.word > .letter > .remove-letter-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
}
.word > .letter > input[type=radio]:checked + label + .remove-letter-btn {
	display: block;
}

.word > .letter > .insert-here-btn {
	display: block;
	position: absolute;
	z-index: 10;
	bottom: 0;
	left: calc(0px - (var(--letter-spacing) / 2));
	transform: translate(-50%,70%);
	padding: 0;
	margin: 0;
	font-size: 0.001px;
	line-height: 0.001px;
	border-radius: 50%;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
.word > .letter:first-child > .insert-here-btn {
	left: 0;
	transform: translate(-55%,70%);
}
.word > .letter:last-child > .insert-here-btn.insert-at-end {
	left: auto;
	right: 0;
	transform: translate(55%,70%);
}
.word > .letter > .insert-here-btn::after {
	content: "";
	display: block;
	width: var(--letter-insert-btn-size);
	height: var(--letter-insert-btn-size);
	border-radius: 50%;
	background-image: url(../images/icon-insert-here.svg);
	background-position: 50% 50%;
	background-size: calc(var(--letter-insert-btn-size) * 0.65);
	background-repeat: no-repeat;
}
.word > .letter > .insert-here-btn:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
}

.word > .letter > button:disabled {
	display: none !important;
}

#play-action-buttons {
	position: relative;
	display: inline-flex;
	justify-content: flex-end;
	align-self: center;
	gap: var(--play-action-btn-spacing);
	flex-wrap: wrap;
	width: var(--play-action-gutter-size);
	height: min-content;
}

#play-action-buttons > button {
	display: block;
	padding: 0;
	margin: 0;
	flex-basis: auto;
	width: var(--play-action-btn-size);
	height: var(--play-action-btn-size);
	font-size: 0.001px;
	line-height: 0.001px;
	outline: none;
	color: transparent;
	background: transparent;
	border: none;
	cursor: pointer;
}
#play-action-buttons > button:disabled {
	display: none;
}
#play-action-buttons > button:focus {
	filter: drop-shadow(0 0 calc(var(--horz-unit) * 1.3) var(--color-button-highlight));
	opacity: 0.8;
}
#play-action-buttons > button:after {
	content: "";
	display: block;
	width: var(--play-action-btn-size);
	height: var(--play-action-btn-size);
	background-position: 0;
	background-size: var(--play-action-btn-size);
	background-repeat: no-repeat;
}
#play-action-buttons > button#insert-letter-btn:after {
	background-image: url(../images/icon-add-letter.svg);
}
#play-action-buttons > button#play-word-btn:after {
	background-image: url(../images/icon-accept-changes.svg);
}
#play-action-buttons > button#reset-word-btn:after {
	background-image: url(../images/icon-abandon-changes.svg);
}

#keyboard {
	--key-width: calc(var(--play-width) / 11.8);
	--key-height: calc(var(--key-width) * 1.8);
	--key-spacing: calc(var(--key-width) / 5);
	--bottom-spacing: calc(var(--key-spacing) * 5);

	grid-area: keyboard;

	position: relative;
	width: var(--play-width);
	height: calc((var(--key-height) * 3) + (var(--key-spacing) * 2));
	margin: 0 auto var(--bottom-spacing) auto;
}

#keyboard > form {
	position: relative;
	display: inline-flex;
	width: 100%;
	height: 100%;
	justify-content: center;
	gap: var(--key-spacing);
	flex-wrap: wrap;
}

#keyboard > form > button {
	flex-basis: auto;
	width: var(--key-width);
	height: var(--key-height);
	background-color: var(--color-light-gray);
	color: var(--color-darkest-gray);
	border: thin solid var(--color-darkest-gray);
	border-radius: calc(var(--key-width) / 5);
	font-size: calc(var(--key-width) * 0.8);
	line-height: var(--key-height);
	padding: 0;
	cursor: pointer;
}

#keyboard > form > button:disabled {
	opacity: 0.3;
}

#keyboard > form > button:nth-child(11) {
	margin-left: calc(var(--key-width) * 0.6);
}

#keyboard > form > button:nth-child(19) {
	margin-right: calc(var(--key-width) * 0.6);
}

#next-play > form,
#keyboard > form {
	margin: 0;
	padding: 0;
}

#message-banner {
	display: block;
	position: fixed;
	background-color: var(--color-darkest-gray);
	color: var(--color-white);
	font-weight: bold;
	font-size: calc(var(--horz-unit) * 5);
	width: 60%;
	min-width: calc(var(--play-width) * 0.7);
	max-width: var(--play-width);
	left: 50%;
	top: calc(var(--vert-unit) * 8);
	transform: translateX(-50%);
	padding: calc(var(--horz-unit) * 4);
	border: thin solid var(--color-white);
	border-radius: calc(var(--horz-unit) * 1.5);
	text-align: center;
}

#message-banner.hidden {
	display: none;
}
